runtime: python313

# App Engineがアプリを実行するためのコマンド
# entrypointの指定がない場合はデフォルトで下記が指定され、
# WSGIサーバーgunicornを使って、main.pyの中のappという名前のFlaskインスタンスを起動される
# entrypoint: gunicorn -b :$PORT app:app

# ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
# 環境変数の設定 (Secret Managerを使用する推奨設定)
# 
# 以下の設定では、'gemini-api-key'という名前のシークレットを
# Google Cloud Secret Managerから読み込み、
# GEMINI_API_KEYという環境変数としてアプリケーションに渡します。
# 
# 事前にGoogle Cloudコンソールで以下の作業が必要です:
# 1. Secret Manager APIを有効にする
# 2. 'gemini-api-key' という名前でシークレットを作成し、
#    実際のGemini APIキーを値として保存する
# 3. このApp Engineサービスアカウントに
#    「Secret Manager のシークレット アクセサー」ロールを付与する
# ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
# secret_env_variables:
#   GEMINI_API_KEY:
#     secret: GEMINI_API_KEY
#     version: 'latest'

# インスタンスクラス（コストを抑えるための最小構成）
# instance_class: F1

handlers:
  # This configures Google App Engine to serve the files in the app's static
  # directory.
- url: /static
  static_dir: static

  # This handler routes all requests not caught above to your main app. It is
  # required when static routes are defined, but can be omitted (along with
  # the entire handlers section) when there are no static files defined.
- url: /.*
  script: auto
